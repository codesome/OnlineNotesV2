<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel='stylesheet' href='/css/bootstrap.css'>
    <link rel='stylesheet' href='/css/style.css'>
    <script src="/js/jquery-1.11.2.min.js" type="text/javascript"></script>
	<script src="/js/bootstrap.js" type="text/javascript"></script>
	<script src="/js/jquery-profile.js" type="text/javascript"></script>
    <title>Notes..</title>
</head>

<body>
<div class="container-fluid">    
<div class="row">
<div class="navbar navbar-inverse col-lg-12" style="background-color:black;border-radius:0;margin-bottom:-1px;">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#Navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
	  <div class="collapse navbar-collapse" id="Navbar">
    <ul class="nav navbar-nav navbar-left">
        <li><a href="/" title="Home" style="font-size:160%;"><span class="glyphicon glyphicon-home"></span></a></li>
      </ul>

      <ul class="nav navbar-nav navbar-right" style="margin-right:0%">
        <li><a href="#" id="create" title="Sign Up"><span class="glyphicon glyphicon-user"></span>&nbsp;Create</a></li>
        <li><a href="/profile/list" id="read" title="Login"><span class="glyphicon glyphicon-log-in"></span>&nbsp;&nbsp;My Notes</a></li>
          <li><a href="/profile/logout" title="Login">Log out</a></li>
      </ul>
    </div>
</div>
</div>
</div>
    
<form id="new-note" action="/profile/createnote" method="post" style="display:none;">    
    <fieldset>
        <label>Name of the note</label><br>
        <input style="color:black" name="name" placeholder="Enter name" required>    
    </fieldset> 
    <fieldset>
        <label>Content</label><br>
        <textarea name="content" placeholder="Enter name"></textarea>    
    </fieldset> 
<button type="submit" value="submit" form="new-note">Create</button> 
</form>

<!-- a note -->   
<fieldset id="aNote">    
    Name: <%=name%><br>    
    Content: <%=content%><br>
    <button id="edit" style="color:black;">edit</button><br>
    <a href="/profile/deletenote/<%=id%>">delete</a>
</fieldset>  
    
    <button id="generate-p-link" style="color:black">Generate public link</button><br>
    <input id="public-link"><br><br>
    
    <button id="delete-p-link" style="color:black;">Delete public link</button><br>
    
<script>
$(document).ready(function(){
    $("#generate-p-link").click(function(){
        $.post('/profile/p',{id:<%=id%>} ,function(data){
            $("#public-link").val(data);
        });
    });
    $("#delete-p-link").click(function(){
        $.post('/profile/d',{id:<%=id%>} ,function(data){
            $("#public-link").val(' ');
        });
    });    
});    
</script>    
<!-- a note -->    

    <!-- edit note -->
<span id="edit-form" style="display:none;">    
<form action="/profile/edit/<%=id%>" id="edit-note" method="post">     
    <fieldset>
        <label>Name of the note</label><br>
        <textarea name="editedName" id="editedName" placeholder="Enter name" required><%=name%></textarea>    
    </fieldset> 
    <fieldset>
        <label>Content</label><br>
        <textarea name="editedContent" id="editedContent" placeholder="Enter content"><%=content%></textarea>    
    </fieldset>     
    <button type="submit" value="submit" form="edit-note" style="color:black" id="done">Done</button> <br>
</form>     
<button id="cancel-edit" style="color:black">discard</button>
</span> 
    <!-- edit note -->
    
<!-- comments -->
<span id="comment-form">    
    <input id="comment" placeholder="max 70 characters" required>
    <button style="color:black;" id="post-comment">post</button>
</span>    
<script>
$(document).ready(function(){
    
    function sendcomment(){
        var id = <%=id%> ;
        var c = $("#comment").val() ;
        $.post("/profile/comment/"+id , {comment:c} ,function(data){
                    $("#comment-space").prepend("<br>Comment: "+data);
                    $("#comment").val("");
               });
    }
    
    $("#comment").keypress(function(event){
        if( event.which == 13 ) sendcomment();
    });
    
    $("#post-comment").click(function(){ 
        sendcomment();
    });
});    
</script>    
<br>
<span id="comment-space">
<% for(i=cRow.length-1;i>=0;i--){ %>
    <br> Comment: <%=cRow[i].comment%>
<% } %>    
</span>    
<!-- comments -->    
</body>
</html>